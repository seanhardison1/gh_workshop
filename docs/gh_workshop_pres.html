<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Getting Git</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sean Hardison" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: right, middle, my-title, title-slide

# Getting Git
### Sean Hardison

---




# Today's workshop

.pull-left[
* Version control systems + Git

* Concepts in Git

* Integration with Github

* Create, collaborate, and share

]

.pull-right[
**Source material**

&lt;img src="images/progit.PNG" width="80%" style="display: block; margin: auto;" /&gt;

]

.footnote[
Chacon, Scott, and Ben Straub. Pro git. Apress, 2014.
]

---
## Why use Github and Git?


.pull-left[
* **Improves reproducibility and transparency:** great for manuscripts but also day-to-day science-ing
]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/DVCS.png" alt="Git + Github = Distributed Version Control System" width="100%" /&gt;
&lt;p class="caption"&gt;Git + Github = Distributed Version Control System&lt;/p&gt;
&lt;/div&gt;
]

---
## Why use Github and Git?
.pull-left[
* **Improves reproducibility and transparency:** great for manuscripts but also day-to-day science-ing


* **Ease of collaboration:** with the right tools, any collaborator should be able to run your code (and build on it) 
]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/DVCS.png" alt="Git + Github = Distributed Version Control System" width="100%" /&gt;
&lt;p class="caption"&gt;Git + Github = Distributed Version Control System&lt;/p&gt;
&lt;/div&gt;
]

---
## Why use Github and Git?
.pull-left[
* **Improves reproducibility and transparency:** great for manuscripts but also day-to-day science-ing

* **Ease of collaboration:** with the right tools, any collaborator should be able to run your code (and build on it) 

* **Communicating your work:** Build and share apps and websites easily with Github Pages 
]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/DVCS.png" alt="Git + Github = Distributed Version Control System" width="100%" /&gt;
&lt;p class="caption"&gt;Git + Github = Distributed Version Control System&lt;/p&gt;
&lt;/div&gt;
]

---
## Why use Github and Git?
.pull-left[
* **Improves reproducibility and transparency:** great for manuscripts but also day-to-day science-ing

* **Ease of collaboration:** with the right tools, any collaborator should be able to run your code (and build on it) 

* **Communicating your work:** Build and share apps and websites easily with Github Pages

* **Never lose your work**
]

.pull-right[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="images/DVCS.png" alt="Git + Github = Distributed Version Control System" width="100%" /&gt;
&lt;p class="caption"&gt;Git + Github = Distributed Version Control System&lt;/p&gt;
&lt;/div&gt;
]

---

## Your friendly neighborhood Version Control System 1:

.pull-left[
**Local Version Control:**  

* Developed to avoid this: "hardison_v2_2_2022_06_02a_edited.csv"
]

.pull-right[

&lt;img src="images/LVCS.png" width="1067" /&gt;

]
---

## Your friendly neighborhood Version Control System 1:

.pull-left[
**Local Version Control:** 

* Developed to avoid this: "hardison_v2_2_2022_06_02a_edited.csv"
  
* An offline database that keeps track of changes to files in a folder ("patches")
]

.pull-right[

&lt;img src="images/LVCS.png" width="1067" /&gt;

]
---

## Your friendly neighborhood Version Control System 1:

.pull-left[
**Local Version Control:** 

* Developed to avoid this: "hardison_v2_2_2022_06_02a_edited.csv"
  
* An offline database that keeps track of changes to files in a folder ("patches")
  
* Patches can be added and subtracted to revert documents to previous states

]

.pull-right[

&lt;img src="images/LVCS.png" width="1067" /&gt;

]
---
  
## Your friendly neighborhood Version Control System 2:

.pull-left[
**Centralized Version Control:** 

* Allows collaboration between systems
]

.pull-right[

&lt;img src="images/CVCS.png" width="1067" /&gt;

]
---

## Your friendly neighborhood Version Control System 2:

.pull-left[
**Centralized Version Control:** 

* Allows collaboration between systems

* **Individual** files can be **checked out** from central server hosting database of file patches
]

.pull-right[

&lt;img src="images/CVCS.png" width="1067" /&gt;

]
---

## Your friendly neighborhood Version Control System 3:

.pull-left[
**Distributed Version Control:** 

* Users **check out** copies of full directories rather than individual files
]

.pull-right[

&lt;img src="images/DVCS.png" width="891" /&gt;

]
---

## Your friendly neighborhood Version Control System 3:

.pull-left[
**Distributed Version Control:** 

* Users **check out** copies of full directories rather than individual files

* These directories, or **repositories**, include the full history of each file
 
]

.pull-right[

&lt;img src="images/DVCS.png" width="891" /&gt;

] 
---

## Your friendly neighborhood Version Control System 3:

.pull-left[
**Distributed Version Control:** 

* Users **check out** copies of full directories rather than individual files

* These directories, or **repositories**, include the full history of each file

* In short: everyone has the database of patches 
 
]

.pull-right[

&lt;img src="images/DVCS.png" width="891" /&gt;

] 

---

## Distributed Version Control Systems

* Distributed Version Control:

  * A copy you create of a remote repository is called a **clone**

.center[
![clone-wars](images/clone-wars.gif)
]

* **Git** is a distributed version control software

---


**Things to know**

* **Repository:** A file directory that is being tracked by **Git**
  
  * Also called a "repo"

--

* **Clone:** An exact copy of a repository containing the full history of project changes

--

**Terminal commands:**

Print current directory
  .remark-inline-code[
    `pwd`
  ]

Change current directory (to /desktop here)
  .remark-inline-code[
  `cd /users/seanhardison/desktop`
  ]


---
## How does Git work?

* Git stores information about the state of all files in the repository (think repo "**snapshots**")

&lt;img src="images/git-snapshots.png" width="80%" style="display: block; margin: auto;" /&gt;

--

* Files that have not been changed are not replicated, but linked to

* All information is **local**, and all operations can be performed offline


???
When a snapshot is taken, a file is assigned an id specific to the checksum, or hash. No further changes can be made to that file without Git first knowing about it, and so you cannot lose information.

---

## The Three File States

* Files can be in one of three states after being added to repo

    1. Staged or "added" - Files are marked for **committing** (the snapshot)
    
        * We need to tell Git which files to track
        
    &lt;br&gt;
    &lt;br&gt;
    &lt;br&gt;
    &lt;br&gt;

&lt;img src="images/file-states.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## The Three File States

* Files can be in one of three states after being added to repo

    1. Staged or "added" - Files are marked for **committing** (the snapshot)
    
        * We need to tell Git which files to track

    2. Modified - A change is made after the file is staged but Git doesn't know what happened

    &lt;br&gt;
  
&lt;img src="images/file-states.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## The Three File States

* Files can be in one of three states after being added to repo

    1. Staged or "added" - Files are marked for **committing** (the snapshot)
    
        * We need to tell Git which files to track

    2. Modified - A change is made after the file is staged but Git doesn't know what happened
    
    3. Committed - Snapshot taken, file states stored to local database

&lt;img src="images/file-states.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## The Three File States continued

* Repository snapshots are transferred between local and remote sessions using **push** and **pull** commands

&lt;img src="images/github-file-states.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## Actually Getting Git: User set-up

**Local Git**

1. Open Git Bash (windows) or terminal window

--

2. Check user name and email address

  .remark-inline-code[
    `git config --global --list`
  ]
  
--

3. Set username and email if nothing shows:

  .remark-inline-code[
    `git config --global user.name 'Jane Doe' `&lt;br&gt;
    `git config --global user.email 'jane@example.com'`
  ]

--

* **Important**: Your email address must map to your Github account

---

## The Github side of things

Before doing anything more locally, we will create and clone a Github repository:

1. Create Github account and log in

--

2. Generate personal access token (PAT) so we can link Git and Github: https://github.com/settings/tokens. **Copy this to your clipboard**.

--

4. **Clone my repository** 

https://github.com/seanhardison1/gh_workshop.git

--

From terminal or Git Bash:

First, change directory to somewhere easy: &lt;br&gt; 
  .remark-inline-code[
      `cd desktop`
    ]

--

Next, tell git to pull Github repository: 
  .remark-inline-code[
    `git clone https://github.com/seanhardison1/gh_workshop.git`
    ]

**Enter PAT as password when prompted**

---

## Cloning Github repo from RStudio

&lt;ol&gt;

&lt;li&gt; Open RStudio

&lt;li&gt; Click here and select &lt;b&gt;New Project&lt;/b&gt;  

&lt;img src="images/rstudio1.png" width="60%" style="display: block; margin: auto;" /&gt;

&lt;ol start="3"&gt;

&lt;li&gt; &lt;b&gt;Version Control&lt;/b&gt; -&gt; &lt;b&gt;Git&lt;/b&gt; -&gt; &lt;b&gt;Paste URL into box&lt;/b&gt;

&lt;li&gt; &lt;b&gt;Create Project&lt;/b&gt;

&lt;/ol&gt;

---
## Create, commit, pull, and push

**First, let me add you as "collaborators" on Github**

--

**In RStudio**

1. Create a new file in `/gh_workshop` (.R, .txt, etc)

--

2. Click into `Git` tab and add file (check boxes under **Staged**)

--

3. Click Commit

--

4. Before you can push changes, make sure repository is current by **pulling** 

--

5. Add your commit message and **push**!

&lt;!-- ![add_commit_push](images/add_commit_push.gif) --&gt;

---

## Create, commit, pull, and push

**From terminal**

1. Create a new file in `/gh_workshop` (.R, .txt, etc)

--

2. `git add newfile.txt`

--

3. `git commit -m "New file!"`

--

4. `git pull`

--

5. `git push`

---

## The Great Merge Conflict of 2022

.center[
![git-merge](images/git-merge.gif)
]

* Merge conflicts occur when collaborators overwrite each other's content

* A merge conflict must be fixed manually

--

* Now for a well-orchestrated example

---

## The Great Merge Conflict of 2022 (continued)

Let's force a merge conflict and work through it. 

**Person A**

  1. Edit document belonging to Person B

  1. Stage, commit, and push the change

--

**Person B**

  1. Make a change overlapping with Person A edits. Stage and commit.

  1. Pull from Github: a merge conflict will appear. 

  1. Fix conflict, stage, commit, and push!

---
## Sharing your work through Github

**Github Pages** is a free service for hosting repository webpages
  * Hugely flexible; allows for interactivity, JS library integration
  * Easy to use

Examples:

* https://seanhardison1.github.io/kelp_ts_models/seasonality

---

## Let's make something to share with the world! 

Since I own the repository I will first need to turn on Github Pages

* Settings-&gt;Code and Automation-&gt;Pages

&lt;img src="images/gh_pages.png" width="1169" /&gt;

---

## Sharing your work through Github

* Open an Rmarkdown document and save it to the repository  

* Knit the document to .html, stage, commit, and push

* Any HTML files will render as a Pages website


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "githubp",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
